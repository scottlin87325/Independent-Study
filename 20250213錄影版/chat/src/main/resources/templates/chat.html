<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.0/sockjs.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
    <link rel="stylesheet" href="/css/Chat/chat style.css">
    <link rel="stylesheet" href="/css/Search/style nav.css">
    <link rel="stylesheet" href="/css/Search/create-post.css">
    <link rel="stylesheet" href="/css/chat.css">

    <title>主頁</title>
</head>

<body>

    <section>
        <!-- 左邊列 -->

        <div class="left">
            <div class="sidebar">
                <div class="menu-item">
                    <a href="/main">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#FFFFFF">
                            <path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z" />
                        </svg>
                        <span>首頁</span>
                    </a>
                </div>


                <div class="menu-item">
                    <a href="/profile">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#FFFFFF">
                            <path
                                d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z" />
                        </svg>
                        <span>個人資料</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="/chat">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#FFFFFF">
                            <path
                                d="M320-520q17 0 28.5-11.5T360-560q0-17-11.5-28.5T320-600q-17 0-28.5 11.5T280-560q0 17 11.5 28.5T320-520Zm160 0q17 0 28.5-11.5T520-560q0-17-11.5-28.5T480-600q-17 0-28.5 11.5T440-560q0 17 11.5 28.5T480-520Zm160 0q17 0 28.5-11.5T680-560q0-17-11.5-28.5T640-600q-17 0-28.5 11.5T600-560q0 17 11.5 28.5T640-520ZM80-80v-720q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v480q0 33-23.5 56.5T800-240H240L80-80Zm126-240h594v-480H160v525l46-45Zm-46 0v-480 480Z" />
                        </svg>
                        <span>聊天室</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="#" onclick="openCreatePost()">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#FFFFFF">
                            <path
                                d="M440-280h80v-160h160v-80H520v-160h-80v160H280v80h160v160ZM200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h560q33 0 56.5 23.5T840-760v560q0 33-23.5 56.5T760-120H200Zm0-80h560v-560H200v560Zm0-560v560-560Z" />
                        </svg>
                        <span>建立</span>
                    </a>
                </div>

                <div class="menu-item">
                    <a href="/settings">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#FFFFFF">
                            <path
                                d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z" />
                        </svg>
                        <span>設定</span>
                    </a>
                </div>

                
                <div class="menu-item">
                    <a href="/logout">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                            fill="#FFFFFF">
                            <path
                                d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-160-55-58 102-102H360v-80h327L585-622l55-58 200 200-200 200Z" />
                        </svg>
                        <span>登出</span>
                    </a>
                </div>
            </div>

            <div class="submenu" id="submenu1">
                <h2>聊天室</h2>
            </div>

            <div class="submenu" id="submenu2">
                <h2>設定</h2>
            </div>
        </div>

        <!-- --------------------------------------------------------- -->

        <div class="left-block"></div>
        <div class="middle">
            <div class="chatroom-container" th:with="currentUser=${session.member}">
                <!-- 左側：好友列表 -->
                <div class="friends-list">
                    <!-- 內距3，border-bottom 在元素底部加上一條邊框線 -->
                    <div class="friendslist-header">
                        <!-- mb-0 是 margin-bottom 的縮寫，0 表示移除底部的外邊距 -->
                        <h5 class="mb-0">聊天室</h5>
                    </div>
                    <div id="friendsList">
                        <!-- 好友列表會由 JavaScript 動態生成 -->
                    </div>
                </div>
                <!-- 右側：聊天視窗 -->
                <div class="chat-window" id="chatWindow">
                    <!-- 聊天視窗標題欄 -->
                    <div class="chat-header">
                        <!-- d-flex : display:flex align-items-center : 靠交錯軸置中對齊 w-100 : 確保寬度為100% -->
                        <div class="d-flex align-items-center w-100">
                            <!-- 聊天對象的頭像 -->
                            <!-- <img th:src="${avatarBase64}" alt="member Avatar" /> -->
                            <div class="friend-avatar ms-3" id="chatAvatar"></div>
                            <!-- 聊天對象的名稱 -->
                            <div>
                                <h6 class="mb-0" id="chatName"></h6>
                            </div>
                        </div>
                    </div>
                    <!-- 訊息顯示區 -->
                    <div class="chat-messages" id="chatMessages">
                        <!-- 訊息內容會由 JavaScript 動態添加 -->
                    </div>
                    <!-- 訊息輸入區 -->
                    <div class="chat-input">
                        <!-- 將表單控制元件（如輸入框）和附加元素（如按鈕）組合在一起 -->
                        <div class="input-group">
                            <!-- form-control : 輸入框的類型 onkeypress="handleKeyPress(event)" : 
                             判斷是否是 Enter 鍵被按下 -->
                            <input type="text" class="form-control" placeholder="輸入訊息..." id="messageInput"
                                onkeypress="handleKeyPress(event)">

                            <!-- 發送按鈕 -->
                            <!-- btn-primary : 主要按鈕(藍) fa-paper-plane : 紙飛機圖示 -->
                            <button class="btn btn-primary" onclick="sendMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="right"></div>
        <div class="right-block"></div>



    </section>

    <script src="/js/chat.js"></script>
    <script src="/js/Search/create-post.js"></script>
    <script src="/js/Chat/script.js"></script>
    <script src="/js/Chat/script_nav.js"></script>

</body>

</html>